## 공공데이터 api 이용 실시간 미세먼지 추출

```python

from urllib.request import urlopen
from urllib.parse import urlencode, unquote, quote_plus
import requests
import urllib
import xmltodict
import json


url = 'http://apis.data.go.kr/B552584/ArpltnStatsSvc/getCtprvnMesureSidoLIst'
queryParams = '?' + urlencode({ quote_plus('ServiceKey') : 'nka5UJqArGL%2BTeI4C6FrpoXxRLjzb02sB3iHQucWdOGDycY%2Byvb3h9s6o4ZC852hKXey83hMKTy1Ng6u3k4gPA%3D%3D', quote_plus('returnType') : 'xml', quote_plus('numOfRows') : '100', quote_plus('pageNo') : '1', quote_plus('sidoName') : '%EC%84%9C%EC%9A%B8', quote_plus('searchCondition'):'DAILY' })
request = urllib.request.Request(url + unquote(queryParams))

response_body = urlopen(request, timeout=60).read() # get bytes data
decode_data = response_body.decode('utf-8')

print(type(decode_data))


xml_parse = xmltodict.parse(decode_data)     # string인 xml 파싱
xml_dict = json.loads(json.dumps(xml_parse))

dic=(xml_dict['response']['body']['items']['item'])

```
공공데이터 사이트에 있는 오픈 api를 이용하여 데이터를 추출한다.

```python
for i in range(100):
    dic[i]=(xml_dict['response']['body']['items']['item'][i])
```

반복문을 이용하여 데이터들을 넣어 준 뒤

```python
for i in range(100):
    del dic[i]['khaiValue']
    del dic[i]['so2Value']
    del dic[i]['coValue']
    del dic[i]['no2Value']
    del dic[i]['districtNumSeq']
    del dic[i]['o3Value']
```
내가 필요 없는 데이터는 삭제해준다.

```python
d1={'cityName':'도시이름','cityNameEng':'영어이름','pm10Value':'미세먼지량','dataTime':'측정시간','pm25Value':'미세먼지량2','sidoName':'도시'}
for i in range(100):
    dic[i]=dict((d1[key], value) for (key, value) in dic[i].items())
```
행 이름을 바꿔준다.<br>

![image](https://user-images.githubusercontent.com/77717717/125746188-4f85eb46-9075-4e82-845a-8af64b581b24.png)

그리하면 내가 찾은 결과 값이 나온다.
